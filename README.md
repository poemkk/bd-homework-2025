# bd-homework-2025
# 1. Инструкция по программе Homework - 1
## I. `create_data.py`
### (I) Функция
Создает бинарный файл размером не менее 2 ГБ, состоящий из случайных 32 - битовых беззнаковых целых чисел в формате big endian.

### (II) Способ использования
Запустите `create_data.py` и укажите в команде путь к выходному файлу и размер файла (необязательно, по умолчанию 2 ГБ).
Пример команды: `python create_data.py data.bin --size 2`

## II. `calc_data.py`
### (I) Функция
Вычисляет сумму 32 - битовых беззнаковых целых чисел в бинарном файле, находит минимальное и максимальное значения. Предоставляет два режима обработки: простое последовательное чтение и использование `multiprocessing` совместно с memory - mapped файлами.

### (II) Способ использования
1. **Режим простого последовательного чтения**:
Пример команды: `python calc_data.py data.bin`
2. **Режим с использованием multiprocessing и memory - mapped файлов**:
Пример команды: `python calc_data.py data.bin --parallel`

### (III) Сравнение результатов
![image](https://github.com/user-attachments/assets/71936196-8e0d-4f7f-ab9c-5f6b50e4b020)

# 2. Homework-2 Инструменты для обработки торговых данных Binance

Этот проект включает три основных скрипта для загрузки и обработки торговых данных с Binance.

## Обзор функциональности

1. **Загрузка данных**: Скачивание сырых торговых данных с Binance
2. **Генерация свечей**: Преобразование сырых торговых данных в OHLC свечи
3. **Генерация дискретных сделок**: Агрегация сырых торговых данных по временным интервалам

## Установка зависимостей

```bash
pip install polars requests pandas pyarrow
```

## Инструкция по использованию

### 1. Загрузка торговых данных Binance (`download_binance_trades.py`)

Скачивание торговых данных для указанной торговой пары и сохранение в формате Parquet.

**Параметры**:
- `symbol`: Символ торговой пары (например, btcusdt)
- `--threads`: Количество потоков загрузки (по умолчанию: 4)
- `--start-date`: Дата начала (в формате ГГГГ-ММ-ДД, по умолчанию: 2025-01-01)

**Пример**:
```bash
python download_binance_trades.py btcusdt --threads 8 --start-date 2025-01-01
```

### 2. Генерация свечных данных (`build_candlesticks.py`)

Преобразование сырых торговых данных в свечные данные.

**Параметры**:
- `--input`: Входной файл или директория (формат Parquet)
- `--output`: Путь для сохранения результата
- `--interval`: Временной интервал (500ms, 1s, 1m)

**Пример**:
```bash
python build_candlesticks.py --input ./data/btcusdt-trades.parquet --output ./data/btcusdt-candles-1s.parquet --interval 1s
```

### 3. Генерация дискретных сделок (`build_discrete_trades.py`)

Агрегация сырых торговых данных по временным интервалам и направлению сделки.

**Параметры**:
- `--input`: Входной файл или директория (формат Parquet)
- `--output`: Путь для сохранения результата
- `--interval`: Временной интервал (250ms, 500ms, 1s, 1h)

**Пример**:
```bash
python build_discrete_trades.py --input ./data/btcusdt-trades.parquet --output ./data/btcusdt-discrete-1h.parquet --interval 1h
```

## Структура выходных данных

### Свечные данные (build_candlesticks.py)
| Поле        | Описание                          |
|-------------|-----------------------------------|
| open_time   | Время начала интервала            |
| open        | Цена открытия (первая сделка)     |
| high        | Максимальная цена                 |
| low         | Минимальная цена                  |
| close       | Цена закрытия (последняя сделка)  |
| random      | Случайно выбранная цена сделки    |
| volume      | Общий объем торгов                |
| num_trades  | Количество сделок                 |

### Дискретные сделки (build_discrete_trades.py)
| Поле           | Описание                          |
|----------------|-----------------------------------|
| open_time      | Время начала интервала            |
| side           | Направление сделки (buy/sell)     |
| vwap_price     | Средневзвешенная цена по объему   |
| total_quantity | Общий объем (базовая валюта)      |
| total_quote_qty| Общий объем (котируемая валюта)   |
| num_trades     | Количество сделок                 |

## Важные замечания

1. Убедитесь, что у вас достаточно места на диске для хранения данных
2. При использовании многопоточной загрузки соблюдайте ограничения Binance
3. Для обработки больших объемов данных может потребоваться значительный объем оперативной памяти
